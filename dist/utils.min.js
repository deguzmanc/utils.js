!function(n,t){"function"==typeof define&&define.amd?(define("@fabiocaccamo/utils.js",t),define("utils",t)):"object"==typeof module?module.exports=t():(n.utils=t(),n.u=t())}(this,function(){"use strict";var n={clean:function(n){return n.filter(function(n){return!(Object.is(n,void 0)||Object.is(n,null)||Object.is(n,NaN))})},flatten:function(n){for(var t=[],r=0,e=n.length;r<e;r++)t.push.apply(null,R.isArray(n[r])?n[r]:[n[r]]);return t},index:function(n,t,r){var e,o,i,u={};"string"==typeof t&&(t=[t]);for(var a=0,c=n.length;a<c;a++){e=n[a];for(var f=0,l=t.length;f<l;f++)o=String(t[f]),i=String(e[o]),!0===r?u[i]=e:(null==u[i]&&(u[i]=[]),u[i].push(e))}return u},mask:function(n,t,r,e){},paginate:function(n,t){var r,e,o=n.length,i=Math.ceil(o/t),u=[];for(r=0,e=0;r<i;r++)e=r*t,u[r]=n.slice(e,e+Math.min(t,o));return u},shuffle:function(n){for(var t,r,e=n.concat(),o=n.length;o;)t=v.integer(0,--o),r=e.splice(t,1),e.push.apply(e,r);return e},sortNumerically:function(n){return n.sort(function(n,t){return n-t})},sortOn:function(n,t){return n.sort(function(n,r){return n[t]<r[t]?-1:n[t]>r[t]?1:0})},unique:function(n){for(var t,r=[],e=0,o=n.length;e<o;e++)t=n[e],-1==r.indexOf(t)&&r.push(t);return r},unzip:function(n){},zip:function(n){}},t={decode:function(n){return window.atob(n)},encode:function(n){return window.btoa(n)}},r={average:function(n){return o.average(n.map(function(n){return r.toRgb(n)}))},gradient:function(n,t){return o.gradient(n.map(function(n){return r.toRgb(n)}),t)},gradientMatrix:function(n,t,e){return o.gradientMatrix(n.map(function(n){return r.toRgb(n)}),t,e)},interpolateBilinear:function(n,t,e,i,u,a){return o.toCmyk(o.interpolateBilinear(r.toRgb(n),r.toRgb(t),r.toRgb(e),r.toRgb(i),u,a))},interpolateLinear:function(n,t,e){return o.toCmyk(o.interpolateLinear(r.toRgb(n),r.toRgb(t),e))},interpolateMultilinear:function(n,t){return o.interpolateMultilinear(n.map(function(n){return r.toRgb(n)}),t)},toCmyk:function(n){return n},toGrayscale:function(n){return o.toGrayscale(r.toRgb(n))},toHex:function(n,t){return o.toHex(r.toRgb(n),t)},toHsl:function(n){return o.toHsl(r.toRgb(n))},toHsv:function(n){return o.toHsv(r.toRgb(n))},toRgb:function(n){var t=n.c/100,r=n.m/100,e=n.y/100,o=n.k/100,i=1-Math.min(1,t*(1-o)+o),u=1-Math.min(1,r*(1-o)+o),a=1-Math.min(1,e*(1-o)+o);return{r:i=Math.round(255*i),g:u=Math.round(255*u),b:a=Math.round(255*a)}},toString:function(n){return"{ c:"+String(n.c)+", m:"+String(n.m)+", y:"+String(n.y)+", k:"+String(n.k)+" }"},toStringCSS:function(n){return"cmyk("+String(n.c)+"%, "+String(n.m)+"%, "+String(n.y)+"%, "+String(n.k)+"%)"}},e={average:function(n){return o.average(n.map(function(n){return e.toRgb(n)}))},gradient:function(n,t){return o.gradient(n.map(function(n){return e.toRgb(n)}),t)},gradientMatrix:function(n,t,r){return o.gradientMatrix(n.map(function(n){return e.toRgb(n)}),t,r)},interpolateBilinear:function(n,t,r,i,u,a){return o.toCmyk(o.interpolateBilinear(e.toRgb(n),e.toRgb(t),e.toRgb(r),e.toRgb(i),u,a))},interpolateLinear:function(n,t,r){return o.toCmyk(o.interpolateLinear(e.toRgb(n),e.toRgb(t),r))},interpolateMultilinear:function(n,t){return o.interpolateMultilinear(n.map(function(n){return e.toRgb(n)}),t)},toCmyk:function(n){return n},toGrayscale:function(n){return o.toGrayscale(e.toRgb(n))},toHex:function(n,t){return o.toHex(e.toRgb(n),t)},toHsl:function(n){return o.toHsl(e.toRgb(n))},toHsv:function(n){return o.toHsv(e.toRgb(n))},toRgb:function(n){var t,r,e,o=g.decodeInt,i=g.encodeInt;switch((t=(t=R.isNumber(n)?i(n):String(n).replace(/\#|0x/,"")).toUpperCase()).length){case 3:r={a:1,r:o((e=/^([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(t))[1]+e[1]),g:o(e[2]+e[2]),b:o(e[3]+e[3])};break;case 6:r={a:1,r:o((e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))[1]),g:o(e[2]),b:o(e[3])};break;case 8:r={a:o((e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))[1])/255,r:o(e[2]),g:o(e[3]),b:o(e[4])}}return r},toString:function(n){return e.toHex(n,"0x")},toStringCSS:function(n){return e.toHex(n,"#")}},o={average:function(n){for(var t=n[0],r=o.interpolateLinear,e=1,i=n.length;e<i;e++)t=r(t,n[e],.5);return t},gradient:function(n,t){for(var r,e=[],i=o.interpolateMultilinear,u=1/Math.max(1,t-1),a=y.constrain,c=0;c<t;c++)r=i(n,a(c*u,0,1)),e.push(r);return e},gradientMatrix:function(n,t,r){var e=n.topLeft,i=n.top,u=n.topRight,a=n.right,c=n.bottomLeft,f=n.bottom,l=n.bottomRight,s=n.left,g=n.center,d=o.average,h=o.interpolateBilinear;i||(i=d([e,u])),a||(a=d([l,u])),f||(f=d([c,l])),s||(s=d([e,c])),g||(g=d([i,s,f,a]));var y,b,m,v,x,R,M=[[[e,s,g,i],[i,g,a,u]],[[s,c,f,g],[g,f,l,a]]],D=[],N=p.scalar;for(R=0;R<r;R++)for(D[R]=[],v=N(2,R/(r-1)||0),x=0;x<t;x++)m=N(2,x/(t-1)||0),e=(y=M[v.index][m.index])[0],c=y[1],l=y[2],b=h(e,c,u=y[3],l,v.t,m.t),D[R][x]=b;return D},interpolateBilinear:function(n,t,r,e,i,u){var a=o.interpolateLinear;return a(a(n,t,i),a(r,e,i),u)},interpolateLinear:function(n,t,r){var e=p.linear;return{r:e(n.r,t.r,r),g:e(n.g,t.g,r),b:e(n.b,t.b,r),a:e(n.a,t.a,r)}},interpolateMultilinear:function(n,t){var r=p.scalar(n.length-1,t),e=r.index;return o.interpolateLinear(n[e],n[e+1],r.t)},toCmyk:function(n){var t=n.r/255,r=n.g/255,e=n.b/255,o=Math.min(1-t,1-r,1-e),i=1-t-o,u=1-r-o,a=1-e-o,c=1-o;return c>0&&(i/=c,u/=c,a/=c,o/=c),{c:i=Math.round(100*i),m:u=Math.round(100*u),y:a=Math.round(100*a),k:o=Math.round(100*o)}},toGrayscale:function(n,t){},toHex:function(n,t){var r=isNaN(n.a)?isNaN(n.alpha)?1:n.alpha:n.a,e=isNaN(n.r)?isNaN(n.red)?0:n.red:n.r,o=isNaN(n.g)?isNaN(n.green)?0:n.green:n.g,i=isNaN(n.b)?isNaN(n.blue)?0:n.blue:n.b,u=g.encodeInt,a=u(255*r),c=u(e),f=u(o),l=u(i);return String((t||"#")+(r>=1?"":a)+c+f+l)},toHsl:function(n){},toHsv:function(n){},toRgb:function(n){return n},toString:function(){return"{ r:"+String(color.r)+", g:"+String(color.g)+", b:"+String(color.b)+", a:"+String(isNaN(color.a)?1:color.a)+" }"},toStringCSS:function(n){return"rgba("+String(n.r)+", "+String(n.g)+", "+String(n.b)+", "+String(isNaN(n.a)?1:n.a)+")"}},u={cmyk:r,cmykToGrayscale:r.toGrayscale,cmykToHex:r.toHex,cmykToHsl:r.toHsl,cmykToHsv:r.toHsv,cmykToRgb:r.toRgb,grayscale:void 0,hex:e,hexToCmyk:e.toCmyk,hexToGrayscale:e.toGrayscale,hexToHsl:e.toHsl,hexToHsv:e.toHsv,hexToRgb:e.toRgb,hsl:void 0,hsv:void 0,rgb:o,rgbToCmyk:o.toCmyk,rgbToGrayscale:o.toGrayscale,rgbToHex:o.toRgb,rgbToHsl:o.toHsl,rgbToHsv:o.toHsv},c={now:function(){return(new Date).getTime()},yyyymmdd:function(n){var t=n||new Date,r=t.getFullYear(),e=t.getMonth()+1,o=t.getDate();return[String(r),(e>9?"":"0")+String(e),(o>9?"":"0")+String(o)].join("")}},f={args:function(n,t){return[].slice.call(n,t||0)},bind:function(n,t){var r=f.args(arguments,2);return f.wrap(n,t,r)},call:function(n,t){if("function"==typeof t)return null;var r=f.args(arguments,2);return t.apply(n,r)},delay:function(n,t,r){var e=f.args(arguments,3),o=f.wrap(n,t,e),i=setTimeout(o,r);return{cancel:function(){clearTimeout(i)},f:o,id:i}},memoize:function(n,t){var r={};return function(){var e=f.args(arguments,0),o=String(e);return o in r||(r[o]=t.apply(n,e)),r[o]}},noop:function(){},repeat:function(n,t,r){var e=f.args(arguments,3),o=f.wrap(n,t,e),i=setInterval(o,r);return{cancel:function(){clearInterval(i)},f:o,id:timeoutID}},wrap:function(n,t,r){return function(){t.apply(n,r)}}},l={add:function(n,t){return{x:n.x+t.x,y:n.y+t.y}},angle:function(n,t){var r=h.angleD(t.y-n.y,t.x-n.x);return h.cycleD(r)},cross:function(n,t){return n.y*t.x-n.x*t.y},distance:function(n,t){var r=t.x-n.x,e=t.y-n.y;return Math.sqrt(r*r+e*e)},dot:function(n,t){return n.x*t.x+n.y*t.y},equals:function(n,t){return n.x===t.x&&n.y===t.y},interpolate:function(n,t,r){var e=y.interpolate.linear;return{x:e(n.x,t.x,r),y:e(n.y,t.y,r)}},project:function(n,t,r){return{x:n.x+t*h.cosD(r),y:n.y+t*h.sinD(r)}},rotate:function(n,t,r){var e=r||{x:0,y:0},o=l.subtract(n,e),i=Trigo.cosD(t),u=Trigo.sinD(t),a={x:o.x*i-o.y*u,y:o.x*u+o.y*i};return l.add(a,e)},scale:function(n,t){return{x:a.x*t,y:a.y*t}},subtract:function(n,t){return{x:n.x-t.x,y:n.y-t.y}},translate:function(n,t,r){return n.x+=t,n.y+=r,n}},s={point:l},g={decodeInt:function(n){return parseInt(n,16)},encodeInt:function(n){var t=Math.round(n).toString(16).toUpperCase();return 1==t.length?"0"+t:t}},d={decode:function(n){return JSON.parse(n)},encode:function(n){return JSON.stringify(n)}},p={bilinear:function(n,t,r,e,o,i){return linear(linear(n,t,o),linear(r,e,o),i)},linear:function(n,t,r){return n*(1-r)+t*r},multilinear:function(n,t){var r=scalar(n.length-1,t),e=r.index;return linear(n[e],n[e+1],r.t)},scalar:function(n,t){var r=t*n,e=Math.floor(r),o=n-1,i=y.constrain(e,0,o);return{index:i,t:r-i}}},h={DEG_0:0,DEG_90:90,DEG_180:180,DEG_270:270,DEG_360:360,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,acosD:function(n){return Math.acos(n)*h.RAD_TO_DEG},angleD:function(n,t){return Math.atan2(n,t)*h.RAD_TO_DEG},angleR:function(n,t){return Math.atan2(n,t)},asinD:function(n){return Math.asin(n)*h.RAD_TO_DEG},atanD:function(n){return Math.atan(n)*h.RAD_TO_DEG},atanD2:function(n,t){return Math.atan2(n,t)*h.RAD_TO_DEG},cosD:function(n){return Math.cos(n*h.DEG_TO_RAD)},degToRad:function(n){return n*h.DEG_TO_RAD},fastD:function(n,t){var r=t-n;return r>h.DEG_180?-h.DEG_360+r:r<-h.DEG_180?h.DEG_360+t:t},hypo:function(n,t){return Math.sqrt(n*n+t*t)},radToDeg:function(n){return n*h.RAD_TO_DEG},sinD:function(n){return Math.sin(n*h.DEG_TO_RAD)},tanD:function(n){return Math.tan(n*h.DEG_TO_RAD)}},y={average:function(n){return y.summation(n)/n.length},constrain:function(n,t,r){return Math.min(Math.max(n,Math.min(t,r)),Math.max(t,r))},cycle:function(n,t){return(n%t+t)%t},factorial:function(n){for(var t=1,r=t;r<=n;r++)t*=r;return t},gcd:function(n,t){return n==t?n:(n<t&&(n^=t,n^=t^=n),y.gcd(n-t,t))},interpolation:p,lcm:function(n,t){return n*t/y.gcd(n,t)},map:function(n,t,r,e,o){return p.linear(e,o,y.normalize(n,t,r))},nearest:function(n,t,r){return Math.abs(n-t)<=Math.abs(n-r)?t:r},normalize:function(n,t,r){return y.constrain((n-t)/(r-t),0,1)},proportion:function(n,t,r,e){return isNaN(n)?t*r/e:isNaN(t)?n*e/r:isNaN(r)?e*n/t:isNaN(e)?r*t/n:Number.NaN},roundDecimals:function(n,t){return Number(n.toFixed(t||2))},roundToMultiple:function(n,t){return Math.round(n/t)*t},roundToNearest:function(t,r,e){var o,i,u=n.sortNumerically(r.concat()),a=y.nearest,c=u.length;if(0==c)return Number.NaN;if(1==c)return u[0];if(2==c)return a(t,u[0],u[1]);if(c>2){for(o=0,i=c-1;i<c;)if(t<u[o=int((i+c)/2)])c=o;else{if(!(t>u[o+1]))break;i=o+1}return i=Math.min(o+1,u.length-1),a(t,u[o],u[i])}},roundToPower:function(n,t){return y.power(t,Math.ceil(Math.log(n)/Math.log(t)))},sign:function(n){return n>=0?1:-1},summation:function(n){var t=0;for(i=0,j=n.length;i<j;i++)t+=n[i];return t}},b={isBetween:function(n,t,r){return n>=t&&n<=r},isEven:function(n){return n%2==0},isFloat:function(n){return n%1!=0},isInt:function(n){return n%1==0},isNegative:function(n){return n<0},isOdd:function(n){return n%2!=0},isPositive:function(n){return n>=0},isPrime:function(n){if(!b.isUint(n))return!1;if(1==n||n%2==0)return!1;if(2==n)return!0;for(var t=3;t*t<=n;t+=2)if(n%t==0)return!1;return!0},isUint:function(n){return n%1==0&&n>=0}},m={assign:function(n){n=Object(n);for(var t=f.args(arguments),r=1,e=t.length;r<e;r++){var o=t[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},clean:function(n){var t,r;for(t in n)""!==(r=n[t])&&null!=r||delete n[t];return n},clone:function(n){return null},decodeBase64:function(n){return d.decode(t.decode(n))},encodeBase64:function(n){return t.encode(d.encode(n))},equals:function(n,t){if(n===t||Object.is(n,t))return!0;var r,e,o,i;if((i=R.of(n))!==R.of(t))return!1;if("array"!==i&&"object"!==i)return String(n)==String(t);for(r in t)if(!(r in n))return!1;for(r in n)if(e=n[r],o=t[r],!(Object.is(n,e)||Object.is(t,o)||Object.is(e,o)||e===o)){if(String(e)!=String(o))return!1;if((i=R.of(e))!==R.of(o))return!1;if(("array"===i||"object"===i)&&!m.equals(e,o))return!1}return!0},keys:function(n,t){var r=Object.keys(n);return!0===t&&r.sort(),r},keypath:{get:function(n,t,r){for(var e=t.split("."),o=n,i=0,u=e.length;i<u;i++)o=o[e[i]];return void 0!==o?o:r},set:function(n,t,r){for(var e,o=t.split("."),i=n,u=0,a=o.length;u<a;u++)i[e=o[u]]=u<a-1?i[e]||{}:r,i=i[e]}},length:function(n){return m.keys(n).length},merge:function(n,t,r){var e,o,i,u={},a=f.args(arguments);for(e=0,o=a.length;e<o;e++)for(i in a[e])u[i]=a[e][i];return u},values:function(n,t){for(var r=m.keys(n,t),e=[],o=0,i=r.length;o<i;o++)e.push(n[r[o]]);return e}},v={argument:function(){var n=f.args(arguments);return v.element(n)},bit:function(n){return v.boolean(n)?1:0},boolean:function(n){return Boolean(Math.random()<(isNaN(n)?.5:n))},color:function(){return v.integer(0,16777215)},element:function(n){return n[v.index(n)]},float:function(n,t){return n+Math.random()*(t-n)},index:function(n){return v.integer(0,n.length-1)},integer:function(n,t){return Math.floor(Math.round(v.float(n-.5,t+.5)))},sign:function(n){return v.boolean(n)?1:-1},string:function(n,t){for(var r=(t=t||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?@#$%^&*(-_=+).,;").split(""),e=v.element,o=0,i="";o++<n;)i+=e(r);return i}},x={contains:function(n,t){return 0!=n.length&&Boolean(n.indexOf(t)>-1)},icontains:function(n,t){return 0!=n.length&&x.contains(n.toLowerCase(),t.toLowerCase())},levenshteinDistance:function(n,t){var r,e,o=[],i=n.length,u=t.length;for(r=0;r<=i;r++){for(o[r]=[],e=0;e<=u;e++)o[r].push(0!=r?0:e);o[r][0]=r}for(r=1;r<=i;r++)for(e=1;e<=u;e++)o[r][e]=Math.min(o[r-1][e]+1,o[r][e-1]+1,o[r-1][e-1]+Math.floor(n.charAt(r-1)==t.charAt(e-1)));return o[i][u]},levenshteinSimilarity:function(n,t){var r=x.levenshteinDistance(n,t),e=Math.max(n.length,t.length);return 0==e?1:1-r/e},padLeft:function(n,t,r){for(var e=n.length;e<t;)n=r+n,e++;return n},padRight:function(n,t,r){for(var e=n.length;e<t;)n+=r,e++;return n},strip:function(n){return 0==n.length?n:n.replace(/\s+/gm,"")},toLowerCaseFirst:function(n){},toRandomCase:function(n){},toUpperCaseFirst:function(n,t){var r=n.substr(0,1).toUpperCase(),e=n.substr(1);return r+(!0===t?e.toLowerCase():e)}},R={isArray:function(n){return Array.isArray?Array.isArray(n):"[object Array]"===Object.prototype.toString.call(n)},isBase64:function(n){if(R.isString(n))try{return t.decode(n),!0}catch(n){}return!1},isBoolean:function(n){return"boolean"==typeof n},isDate:function(n){return"[object Date]"===Object.prototype.toString.call(n)},isError:function(n){return n instanceof Error},isFunction:function(n){return"function"==typeof n},isJSON:function(n){if(R.isString(n))try{return d.decode(n),!0}catch(n){}return!1},isObject:function(n){return"object"==typeof n},isNumber:function(n){return"number"==typeof n},isNull:function(n){return null===n},isRegExp:function(n){return n instanceof RegExp},isString:function(n){return"string"==typeof n},isUndefined:function(n){return void 0===n},isXML:function(n){return!1},of:function(n){return R.isArray(n)?"array":R.isBoolean(n)?"boolean":R.isDate(n)?"date":R.isError(n)?"error":R.isFunction(n)?"function":R.isNumber(n)?"number":R.isNull(n)?"null":R.isObject(n)?"object":R.isRegExp(n)?"regexp":R.isString(n)?"string":R.isUndefined(n)?"undefined":R.isXML(n)?"xml":void 0}},M={getParameterByName:function(n,t){var r=n.replace(/[\[\]]/g,"\\$&"),e=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)").exec(t||M.getURL());return e?e[2]?decodeURIComponent(e[2]):"":null},getParameters:function(n){return{}},getURL:function(){return window.location.href},isFile:function(n){return 0===(n||M.getURL()).indexOf("file://")},isHttp:function(n){return 0===(n||M.getURL()).indexOf("http://")},isHttps:function(n){return 0===(n||M.getURL()).indexOf("https://")},isLocalhost:function(n){return/^(https?\:\/\/)(localhost|127\.0\.0\.1)(\:[\d]+)?(\/(.)*)?$/.test(n||M.getURL())}};return{array:n,base64:t,color:u,date:c,func:f,geom:s,hex:g,json:d,math:y,number:b,object:m,random:v,string:x,trigo:h,type:R,xml:{removeNamespaces:function(n){return n.replace(/(\<(.|\n)+?\>)/g,function(n){return n.replace(/(\s|\<\/?){1}([\w]+\:){1}/g,"$1")})}},url:M}});